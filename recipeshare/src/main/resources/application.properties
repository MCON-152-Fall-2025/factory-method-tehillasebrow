spring.application.name=recipeshare
server.port=8081

# Database Configuration
spring.datasource.url=jdbc:h2:file:./data/recipeshare;AUTO_SERVER=TRUE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=1234
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true

# ============================
# ==   LOG LEVELS           ==
# ============================
# Root logger at INFO
logging.level.root=INFO

# Web layer at DEBUG for detailed tracing
logging.level.com.mcon152.recipeshare.web=DEBUG

# Spring internals at INFO to avoid noise
logging.level.org.springframework.web=INFO

# ============================
# ==   CONSOLE PATTERN      ==
# ============================
# %highlight(%-5level) colors the level (Green INFO, Red ERROR, etc.)
# \u001B[35m ... \u001B[0m wraps the MDC{recipeName} in Pink
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %highlight(%-5level) %logger{36} - \u001B[35m%X{recipeName}\u001B[0m %msg%n

# ============================
# ==   ROLLING FILE LOGS    ==
# ============================
logging.file.name=logs/recipeshare.log

# Rotate daily or by size, gzip archived logs
logging.logback.rollingpolicy.file-name-pattern=logs/recipeshare-%d{yyyy-MM-dd}.%i.log.gz

# Small max-file-size for testing rotation (50KB)
logging.logback.rollingpolicy.max-file-size=50KB

# Keep 7 days of history
logging.logback.rollingpolicy.max-history=7

# Cap total size at 1GB
logging.logback.rollingpolicy.total-size-cap=1GB

# Clean old logs on startup
logging.logback.rollingpolicy.clean-history-on-start=true